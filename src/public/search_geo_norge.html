<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vector Search</title>
</head>
<body>
<h1>Vector Search</h1>
<form id="searchForm">
    <input type="text" id="searchInput" placeholder="Enter text for search">
    <button type="submit">Search</button>
</form>
<div id="results"></div>

<script>
    document.getElementById('searchForm').onsubmit = async (e) => {
        e.preventDefault();
        const inputText = document.getElementById('searchInput').value;
        const response = await fetch('http://localhost:3000/search', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ inputText })
        });
        let results = await response.json();

        // This is the UI part of the code
        let htmlWithUrl = results.map((result) => { // Same as a for-loop, but more concise
            // Start with the link for metadata
            let html = `<a href="https://kartkatalog.geonorge.no/metadata/${encodeURIComponent(result.title)}/${result.uuid}" target="_blank">Metadata for ${result.title}</a><br/>`;

            // Add other data from the result
            Object.keys(result).forEach(key => {
                if (key !== 'title' && key !== 'uuid') { // Exclude title and uuid since they're already used
                    html += `<strong>${key}:</strong> ${result[key]}<br/>`;
                }
            });

            return html + '<br/>'; // Add extra line break for spacing between items
        }).join('');

        // Inject the HTML into the results container
        document.getElementById('results').innerHTML = htmlWithUrl;

    };
</script>
</body>
</html>
